# 性能优化点

- 问题：react 有哪些性能优化的点
    - 解题：
        - 初阶：术
            - 升级到最新版本 & 使用生产环境版本
            - 缓存
                - 谨慎使用 context —— 不能阻止 context 触发的 render
                - 使用 pure component  + 使用 immutable 数据
                - 手写 shouldComponentUpdate
                - 使用 React.memo 缓存 fc
                    - 对 props 做浅层对比，确定是否重新渲染
                - 使用 useCallback、useMemo 等钩子
                    - 缓存计算结果，减少重复计算
                    - useMemo 直接缓存虚拟dom
            - 组件：
                - 虚拟长列表
                - 使用 React.Fragment 避免添加额外的DOM
                - 列表中使用 key
                - 合理拆分组件大小
                    - 如果你整个页面只有一个大的组件，那么当 props 或者 state 变更之后，需要 reconction 的是整个组件，其实你只是变了一个文字，如果你进行了合理的组件拆分，你就可以控制更小粒度的更新。
                - 延迟加载
                - 节流防抖
            - 等等
        - 中阶：道
            - 性能优化的角度
                - 减少 render 的次数：跳过不必要的组件更新
                - 减少重复计算 —— 缓存结果；
            - 如何发现性能问题：
                - react profile 插件
                - 性能排查 —— 之前聊过了

        - 高阶：
            - 聊聊 vue 中比较常见的优化手段，描述自己的感受 —— 例如，react 灵活性高但心智负担也比较高；vue 比较简单，但优化的上限很低
            - 聊聊性能优化经验
    - 资料：
        - <https://github.com/brickspert/blog/issues/36>
        - <https://juejin.cn/post/6935584878071119885#heading-12>
