# 面试题 浏览器

[Toc]

## 1. 从浏览器地址栏输入 url 到请求返回发生了什么

### 1. 输入 url 后解析出协议, 主机, 端口, 路径,参数等, 并构造一个 http 请求

### 2. DNS 解析: 将域名解析为 IP 地址

### 3. 建立 TCP/IP 连接: TCP 三次握手

1. 第一次握手, 确认客服端的发送能力
2. 第二次握手, 确认了服务端的接收能力和发送能力
3. 第三次握手, 确认客户端的接收能力。

### 4. 发送 HTTP 请求

### 5. 服务器处理请求并返回 HTTP 报文

### 6. 浏览器渲染页面

1. ![img](../../../../ToDo/media/16790396058842/16790405384247.jpg)
2. 步骤:
    1. 解析HTML，生成DOM树，解析CSS，生成CSSOM树
    2. 将DOM树和CSSOM树结合，生成渲染树(Render Tree)
    3. Layout(回流):根据生成的渲染树，进行回流(Layout)，得到节点的几何信息（位置，大小）
    4. Painting(重绘):根据渲染树以及回流得到的几何信息，得到节点的绝对像素
    5. Display:将像素发送给GPU，展示在页面上
    >回流一定会触发重绘，而重绘不一定会回流

### 7. 断开连接: TCP 四次挥手

1. 第一次: 浏览器告知服务器 请求发送完毕
2. 第二次: 服务器告知浏览器 请求接受完毕
3. 第三次: 服务器告知浏览器 响应发送完毕
4. 第四次: 浏览器告知服务器 响应接受完毕

## 2. web 存储

### 1 [session 和 cookie 的区别](../../后端/Node/session和cookie的区别.md)

### 2 localStorgae 和 sessitonSorage

* HTML5 专门为存储来设计的,最大客村 5M
* API 简单易用
* 不会随着 http 请求被发送到服务端.
区别:
* localStorage 数据会永久存储,除非代码删除或手动删除.
* sessionStorage 数据只存在于当前会话,浏览器关闭则清空.
* 一般用 localStorage 会多一些.
