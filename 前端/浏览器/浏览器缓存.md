# 浏览器缓存

![img](./assets/2023-04-04-18-43-52.png)

- 强制缓存
    1. Cache-Control(http1.1)
       1. ![img](./assets/2023-04-04-18-52-23.png)
       2. 可以组合使用多种指令
    2. Expires(http1.0)
       1. 指定资源到期的服务端时间，如果在这个时间之前，浏览器直接从缓存中读取资源，不会再次发送请求。
       2. 问题：服务器的时间和浏览器的时间可能并不一致，那服务器返回的这个过期时间可能就是不准确的。
    3. Cache-Control优先级更高
- 协商缓存
  1. Etag(http1.1)
     1. 资源的唯一标识，服务器会根据文件内容生成一个唯一的标识，浏览器再次请求时，会将这个标识发送给服务器，服务器根据这个标识判断资源是否有更新，如果没有更新，返回304，浏览器直接从缓存中读取资源。
     2. 解决 Last-Modified 的问题
  2. Last-Modified(http1.0)
     1. 指定资源最后修改的服务端时间，如果在这个时间之后，浏览器才会发送请求，否则直接从缓存中读取资源。
     2. 问题：
        1. Last-Modified 只能精确到秒级。
        2. 如果资源被重复生成，而内容不变，那么 Last-Modified 的时间也会被更新，这样就会导致缓存失效。
  3. Etag 优先级更高
- 强制缓存优先级高于协商缓存
